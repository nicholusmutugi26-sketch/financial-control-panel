# ====================
# Database - Supabase
# ====================
# LOCAL DEVELOPMENT: Use PgBouncer transaction mode on port 6543
# This prevents MaxClientsInSessionMode errors under load
DATABASE_URL="postgresql://postgres:[password]@aws-1-eu-west-1.pooler.supabase.com:6543/postgres?schema=public&pgbouncer=true"

# PRODUCTION (VERCEL): CRITICAL - Must use port 6543 transaction mode
# Get connection string from Supabase Dashboard > Project Settings > Database > Connection Strings
# IMPORTANT: Change port from 5432 (session mode) to 6543 (transaction mode)
# Add ?pgbouncer=true parameter
# Example: postgresql://postgres:xxxxx@aws-1-eu-west-1.pooler.supabase.com:6543/postgres?schema=public&pgbouncer=true
# 
# DEPLOYMENT INSTRUCTIONS for Vercel:
# 1. Go to Vercel Dashboard > Project > Settings > Environment Variables
# 2. Update DATABASE_URL with port 6543 and ?pgbouncer=true parameter
# 3. Redeploy the project
# 4. Test login - should NOT see "MaxClientsInSessionMode" errors

# ====================
# Supabase Configuration
# ====================
# Get from: Supabase Dashboard > Project Settings > API
NEXT_PUBLIC_SUPABASE_URL="https://jmwgruhqkhiknysaqyam.supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="sb_publishable_c4FEukxLeSoY5RW4vAWt6w_-PRCMgHI"
SUPABASE_SERVICE_ROLE_KEY="your_service_role_key"

# ====================
# NextAuth Configuration
# ====================
# LOCAL
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="your-super-secret-nextauth-key-change-this"

# PRODUCTION: Set in Vercel environment variables
# NEXTAUTH_URL="https://your-vercel-domain.vercel.app"
# NEXTAUTH_SECRET=<strong-random-secret>

# ====================
# M-Pesa Configuration
# ====================
MPESA_CONSUMER_KEY="your_consumer_key"
MPESA_CONSUMER_SECRET="your_consumer_secret"
MPESA_PASSKEY="your_passkey"
MPESA_SHORTCODE="174379"

# LOCAL
MPESA_CALLBACK_URL="http://localhost:3000/api/webhooks/mpesa"

# PRODUCTION: Set in Vercel environment variables
# MPESA_CALLBACK_URL="https://your-vercel-domain.vercel.app/api/webhooks/mpesa"

# ====================
# UploadThing Configuration
# ====================
UPLOADTHING_SECRET="sk_live_your_uploadthing_secret"
UPLOADTHING_APP_ID="your_app_id"

# ====================
# App Configuration
# ====================
APP_URL="http://localhost:3000"
JWT_SECRET="your-jwt-secret-change-this"

# LOCAL
NEXT_PUBLIC_SOCKET_URL="http://localhost:3000"

# PRODUCTION: Set in Vercel environment variables
# NEXT_PUBLIC_SOCKET_URL="https://your-vercel-domain.vercel.app"
